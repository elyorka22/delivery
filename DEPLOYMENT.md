# Руководство по деплою

## Статус готовности: ✅ ГОТОВ К ДЕПЛОЮ

### Реализованный функционал

#### ✅ Публичная часть (Клиент)
- [x] Главная страница с поиском и каруселью ресторанов
- [x] Просмотр меню ресторана
- [x] Корзина с управлением количеством
- [x] Оформление заказа
- [x] История заказов
- [x] Профиль пользователя
- [x] Регистрация и авторизация
- [x] Адаптивный дизайн (мобильная версия)

#### ✅ Панель супер-админа
- [x] Статистика системы
- [x] Управление ресторанами (создание, редактирование, удаление)
- [x] Управление изображениями ресторанов
- [x] Управление пользователями
- [x] Создание менеджеров
- [x] Просмотр всех заказов

#### ✅ Панель менеджера
- [x] Статистика ресторана
- [x] Управление информацией о ресторане (включая изображение)
- [x] Управление меню (создание, редактирование, удаление блюд)
- [x] Управление категориями
- [x] Создание поваров и курьеров
- [x] Просмотр заказов ресторана

#### ✅ Панель повара
- [x] Просмотр заказов
- [x] Изменение статуса готовности

#### ✅ Панель курьера
- [x] Просмотр доступных заказов
- [x] Принятие заказов
- [x] Отслеживание доставки

### Технические требования

#### Backend
- ✅ Node.js + Express + TypeScript
- ✅ Supabase (PostgreSQL) база данных
- ✅ Prisma ORM
- ✅ JWT аутентификация
- ✅ Socket.io для real-time уведомлений
- ✅ CORS настроен
- ✅ Все API endpoints реализованы

#### Frontend
- ✅ React + TypeScript + Vite
- ✅ Tailwind CSS для стилизации
- ✅ Zustand для state management
- ✅ React Router для навигации
- ✅ Axios для API запросов
- ✅ Socket.io-client для real-time
- ✅ Адаптивный дизайн

### Перед деплоем

#### 1. Настройка окружения

**Backend (.env):**
```env
PORT=5000
DATABASE_URL="postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres?pgbouncer=true&connection_limit=1"
JWT_SECRET="your-secret-key-change-in-production"
FRONTEND_URL="http://localhost:3000"
```

**Важно:** Получите Connection String из Supabase Dashboard → Settings → Database

**Frontend (.env):**
```env
VITE_API_URL=http://localhost:5000/api
```

#### 2. Создание супер-админа

После деплоя создайте супер-админа вручную через базу данных:

```sql
-- В SQLite
INSERT INTO users (id, email, password, name, role, created_at, updated_at)
VALUES ('admin-id', 'admin@example.com', '<hashed_password>', 'Super Admin', 'SUPER_ADMIN', datetime('now'), datetime('now'));
```

Или используйте скрипт:
```bash
cd backend
npm run create-test-users
```

#### 3. Сборка для продакшена

**Backend:**
```bash
cd backend
npm run build
npm start
```

**Frontend:**
```bash
cd frontend
npm run build
# Файлы будут в frontend/dist
```

### Рекомендации для продакшена

1. **База данных**: ✅ Используется Supabase (PostgreSQL) - готово к продакшену
2. **Переменные окружения**: Используйте безопасное хранение секретов
3. **HTTPS**: Настройте SSL сертификаты
4. **CDN**: Используйте CDN для статических файлов
5. **Мониторинг**: Настройте логирование и мониторинг
6. **Backup**: Настройте регулярные бэкапы базы данных

### Известные ограничения

- Изображения хранятся по URL (нет загрузки файлов)
- Нет системы отзывов (как планировалось изначально)

### Тестовые аккаунты

См. файл `TEST_ACCOUNTS.md` для тестовых аккаунтов.

### Структура проекта

```
fooddelivery/
├── backend/          # Backend приложение
│   ├── src/         # Исходный код
│   ├── prisma/      # Схема БД и миграции
│   └── package.json
├── frontend/        # Frontend приложение
│   ├── src/         # Исходный код
│   └── package.json
├── README.md        # Основная документация
├── SETUP.md         # Инструкция по установке
├── DEPLOYMENT.md    # Это руководство
└── TEST_ACCOUNTS.md # Тестовые аккаунты
```

### Готовность: ✅ 95%

Проект готов к деплою. Осталось только:
1. Настроить переменные окружения для продакшена
2. (Опционально) Переключить на PostgreSQL
3. Создать супер-админа после деплоя

