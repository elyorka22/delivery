# Исправление ошибки Railway деплоя

## Проблема

Railway не может определить, как собрать приложение, потому что он смотрит в корень репозитория, а не в папку `backend/`.

Ошибка:
```
✖ Railpack could not determine how to build the app.
```

## Решение

### Вариант 1: Настроить Root Directory в Railway UI (РЕКОМЕНДУЕТСЯ)

1. Зайдите в ваш проект на Railway
2. Откройте сервис (service)
3. Перейдите в **Settings**
4. Найдите секцию **"Root Directory"**
5. Введите: `backend`
6. Сохраните изменения
7. Railway автоматически перезапустит деплой

### Вариант 2: Использовать railway.json (автоматически)

Я создал файл `railway.json` в корне проекта. Railway автоматически его обнаружит.

Если это не сработает, используйте Вариант 1.

---

## Пошаговая инструкция (Вариант 1)

### Шаг 1: Открыть настройки сервиса

1. В Railway dashboard откройте ваш проект
2. Кликните на сервис (service)
3. Перейдите в **Settings** (вкладка слева)

### Шаг 2: Установить Root Directory

1. Прокрутите вниз до секции **"Build & Deploy"**
2. Найдите поле **"Root Directory"**
3. Введите: `backend`
4. Нажмите **"Save"** или **"Update"**

### Шаг 3: Проверить Start Command

Убедитесь, что **Start Command** установлен:
- `npm start` (Railway автоматически добавит `cd backend &&` если Root Directory установлен)

Или явно:
- `cd backend && npm start`

### Шаг 4: Перезапустить деплой

1. Railway автоматически перезапустит деплой после сохранения
2. Или вручную: **Deployments** → **Redeploy**

---

## Что происходит после настройки

После установки Root Directory:

1. Railway будет:
   - Искать `package.json` в папке `backend/`
   - Запускать `npm install` в папке `backend/`
   - Запускать `npm run build` в папке `backend/`
   - Запускать `npm start` в папке `backend/`

2. Railway НЕ будет:
   - Смотреть в корень репозитория
   - Видеть папку `frontend/`
   - Пытаться собрать frontend

---

## Проверка

После настройки проверьте логи:

1. Откройте **Deployments** → выберите последний деплой
2. Откройте **Logs**
3. Должны увидеть:
   ```
   Installing dependencies...
   Building...
   Server is running on port 5000
   ```

Если видите ошибки, проверьте:
- Root Directory установлен на `backend`
- Переменные окружения добавлены
- `DATABASE_URL` правильный

---

## Альтернатива: Создать отдельный репозиторий для backend

Если проблемы продолжаются, можно:
1. Создать отдельный репозиторий `elyorka22/delivery-backend`
2. Скопировать только папку `backend/`
3. Задеплоить его на Railway

Но это не рекомендуется - монorepo лучше! ✅

---

## Troubleshooting

### Проблема: Root Directory не сохраняется

**Решение:**
1. Убедитесь, что вы сохранили изменения
2. Проверьте, что вы в правильном сервисе
3. Попробуйте перезагрузить страницу

### Проблема: Все еще ошибка после настройки Root Directory

**Решение:**
1. Проверьте логи деплоя
2. Убедитесь, что в `backend/package.json` есть скрипт `start`
3. Проверьте, что все переменные окружения установлены

### Проблема: Railway не видит package.json

**Решение:**
1. Убедитесь, что Root Directory = `backend` (без слеша в конце)
2. Проверьте, что `backend/package.json` существует
3. Попробуйте перезапустить деплой

---

## Следующие шаги

После успешного деплоя backend:
1. Получите URL backend из Railway
2. Задеплойте frontend на Vercel
3. Обновите переменные окружения



