# Пошаговая инструкция: Создание супер-админа в Firebase Console

## Шаг 1: Получить хеш пароля

Сначала нужно получить хеш пароля для `admin123`.

### Вариант A: Локально (если есть Node.js)

1. Откройте терминал
2. Перейдите в папку проекта:
   ```bash
   cd /Users/admin/fooddelivery/backend
   ```
3. Выполните команду:
   ```bash
   node -e "const bcrypt = require('bcryptjs'); bcrypt.hash('admin123', 10).then(hash => console.log(hash))"
   ```
4. Скопируйте полученный хеш (начинается с `$2a$10$...`)

### Вариант B: Использовать готовый хеш

Для пароля `admin123` хеш:
```
$2a$10$b/ZJ6Rt1FxTSzx8PJPJviuH4OFxejWrFd/X59wjtaRBAMhiRQBv8K
```

**⚠️ ВАЖНО:** Сохраните этот хеш - он понадобится в Шаге 4.

---

## Шаг 2: Открыть Firebase Console

1. Откройте браузер
2. Перейдите на: https://console.firebase.google.com
3. Войдите в свой Google аккаунт (если нужно)
4. Выберите проект **`delivery-34a6e`**

---

## Шаг 3: Открыть Firestore Database

1. В левом меню найдите раздел **"Build"**
2. Нажмите на **"Firestore Database"**
3. Если база данных еще не создана:
   - Нажмите **"Create database"**
   - Выберите режим: **"Start in production mode"** (или "Start in test mode" для разработки)
   - Выберите регион (например, `us-central`)
   - Нажмите **"Enable"**

---

## Шаг 4: Создать коллекцию "users" (если её нет)

1. Если коллекции `users` еще нет:
   - Нажмите **"Start collection"**
   - В поле **"Collection ID"** введите: `users`
   - Нажмите **"Next"**

2. Если коллекция `users` уже существует:
   - Просто откройте её, нажав на название

---

## Шаг 5: Добавить документ (супер-админа)

1. В коллекции `users` нажмите кнопку **"Add document"** (или **"+"**)

2. В поле **"Document ID"**:
   - Оставьте пустым (Firebase создаст автоматически)
   - Или введите свой ID (например: `admin-001`)

3. Нажмите **"Next"** или начните добавлять поля

---

## Шаг 6: Добавить поля документа

Добавьте следующие поля по одному:

### Поле 1: email
- **Field:** `email`
- **Type:** выберите `string`
- **Value:** `admin@demo.com`
- Нажмите **"Add field"** или **"Done"**

### Поле 2: password
- **Field:** `password`
- **Type:** выберите `string`
- **Value:** вставьте хеш пароля из Шага 1:
  ```
  $2a$10$b/ZJ6Rt1FxTSzx8PJPJviuH4OFxejWrFd/X59wjtaRBAMhiRQBv8K
  ```
- Нажмите **"Add field"** или **"Done"**

### Поле 3: name
- **Field:** `name`
- **Type:** выберите `string`
- **Value:** `Demo Super Admin`
- Нажмите **"Add field"** или **"Done"**

### Поле 4: phone
- **Field:** `phone`
- **Type:** выберите `string`
- **Value:** `+7 (999) 000-00-00`
- Нажмите **"Add field"** или **"Done"**

### Поле 5: role
- **Field:** `role`
- **Type:** выберите `string`
- **Value:** `SUPER_ADMIN`
- **⚠️ ВАЖНО:** Должно быть именно `SUPER_ADMIN` (заглавными буквами)
- Нажмите **"Add field"** или **"Done"**

### Поле 6: createdAt
- **Field:** `createdAt`
- **Type:** выберите `timestamp`
- **Value:** нажмите на календарь и выберите текущую дату/время
- Или оставьте по умолчанию (текущее время)
- Нажмите **"Add field"** или **"Done"**

### Поле 7: updatedAt
- **Field:** `updatedAt`
- **Type:** выберите `timestamp`
- **Value:** нажмите на календарь и выберите текущую дату/время
- Или оставьте по умолчанию (текущее время)
- Нажмите **"Add field"** или **"Done"**

---

## Шаг 7: Сохранить документ

1. Проверьте, что все поля добавлены:
   - ✅ `email`: `admin@demo.com`
   - ✅ `password`: хеш пароля
   - ✅ `name`: `Demo Super Admin`
   - ✅ `phone`: `+7 (999) 000-00-00`
   - ✅ `role`: `SUPER_ADMIN`
   - ✅ `createdAt`: timestamp
   - ✅ `updatedAt`: timestamp

2. Нажмите **"Save"** (или **"Done"**)

---

## Шаг 8: Проверка

1. Документ должен появиться в коллекции `users`
2. Убедитесь, что поле `role` содержит именно `SUPER_ADMIN` (заглавными буквами)

---

## Шаг 9: Войти в систему

1. Откройте ваш сайт (Vercel URL)
2. Нажмите **"Войти"** (или "Login")
3. Введите:
   - **Email:** `admin@demo.com`
   - **Пароль:** `admin123`
4. Нажмите **"Войти"**

5. После входа вы должны увидеть кнопку для перехода в админ-панель

---

## Итоговые данные для входа

- **Email:** `admin@demo.com`
- **Пароль:** `admin123`
- **Роль:** `SUPER_ADMIN`

---

## Если что-то пошло не так

### Ошибка: "Collection not found"
**Решение:** Убедитесь, что вы создали коллекцию `users` (Шаг 4)

### Ошибка: "Invalid field type"
**Решение:** Проверьте тип каждого поля:
- `email`, `password`, `name`, `phone`, `role` → `string`
- `createdAt`, `updatedAt` → `timestamp`

### Ошибка при входе: "Invalid credentials"
**Решение:** 
1. Проверьте, что хеш пароля скопирован полностью
2. Убедитесь, что поле `role` содержит `SUPER_ADMIN` (заглавными)
3. Проверьте, что email точно `admin@demo.com`

### Не вижу кнопку админ-панели
**Решение:**
1. Проверьте, что `role` = `SUPER_ADMIN` (не `super_admin` или `Super Admin`)
2. Выйдите и войдите снова
3. Очистите кеш браузера

---

## Альтернатива: Изменить существующего пользователя

Если вы уже зарегистрировались как обычный пользователь:

1. Откройте Firebase Console → Firestore → `users`
2. Найдите документ с вашим email
3. Нажмите на документ для редактирования
4. Измените поле `role` на `SUPER_ADMIN`
5. Сохраните

Теперь вы сможете войти как супер-админ!

